<!--pages/forumDetail/forumDetail.wxml-->
<view class="page">
  <scroll-view scroll-y class="scroll-content">
    <view class="post-detail">
      <!-- 头部 -->
      <view class="post-header">
        <image class="post-avatar" src="{{post.userAvatar}}" mode="aspectFill"></image>
        <view class="post-user">
          <text class="post-username">{{post.userName}}</text>
          <text class="post-time">{{post.timeAgo}}</text>
        </view>
      </view>

      <text class="post-title">{{post.title}}</text>
      <text class="post-content">{{post.content}}</text>

      <!-- 图片 -->
      <view class="post-images" wx:if="{{post.images && post.images.length > 0}}">
        <image wx:for="{{post.images}}" wx:key="index" src="{{item}}" mode="widthFix" class="post-img"></image>
      </view>

      <!-- 互动数据 -->
      <view class="post-stats">
        <view class="stat" style="display:inline-flex;align-items:center;gap:6rpx;">
          <icon name="thumbs-up" size="28" color="#888"></icon>
          <text>{{post.likeCount}}</text>
        </view>
        <view class="stat" style="display:inline-flex;align-items:center;gap:6rpx;">
          <icon name="message-circle" size="28" color="#888"></icon>
          <text>{{post.commentCount}}</text>
        </view>
      </view>
    </view>

    <!-- 评论区 -->
    <view class="comment-section">
      <text class="section-title">评论 ({{comments.length}})</text>
      <view class="comment-item" wx:for="{{comments}}" wx:key="id">
        <image class="comment-avatar" src="/images/avatar-placeholder.png" mode="aspectFill"></image>
        <view class="comment-body">
          <text class="comment-name">{{item.userName}}</text>
          <text class="comment-text">{{item.content}}</text>
          <text class="comment-time">{{item.time}}</text>
        </view>
      </view>
      <view class="empty-comment" wx:if="{{comments.length === 0}}">
        <text class="text-secondary">暂无评论，说两句吧~</text>
      </view>
    </view>
    <view style="height: 130rpx;"></view>
  </scroll-view>

  <!-- 底部评论栏 -->
  <view class="comment-bar safe-bottom">
    <input class="comment-input" placeholder="说说你的看法..." bindinput="onCommentInput" value="{{commentText}}"/>
    <view class="bar-actions">
      <view class="like-btn" bindtap="onLike">
        <icon name="thumbs-up" size="40" color="{{isLiked ? '#E6A023' : '#999'}}" filled="{{isLiked}}"></icon>
      </view>
      <button class="send-btn" bindtap="onSend">发送</button>
    </view>
  </view>
</view>
