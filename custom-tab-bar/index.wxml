<view class="tab-bar-wrap safe-bottom">
  <view class="tab-bar-inner">
    <!-- 左侧胶囊导航 -->
    <view class="tab-pill">
      <view class="pill-item {{selected === 0 ? 'active' : ''}}" bindtap="switchTab" data-path="/pages/index/index" data-index="0">
        <icon name="home" size="42" color="{{selected === 0 ? '#1A1A1A' : '#BBBBBB'}}" filled="{{selected === 0}}"></icon>
      </view>
      <view class="pill-item msg-pill" bindtap="goPage" data-path="/pages/chat/chat">
        <icon name="message-circle" size="42" color="#BBBBBB"></icon>
        <view class="unread-badge" wx:if="{{unreadCount > 0}}">
          <text>{{unreadCount > 99 ? '99+' : unreadCount}}</text>
        </view>
      </view>

      <view class="pill-item {{selected === 1 ? 'active' : ''}}" bindtap="switchTab" data-path="/pages/mine/mine" data-index="1">
        <icon name="user" size="42" color="{{selected === 2 ? '#1A1A1A' : '#BBBBBB'}}" filled="{{selected === 2}}"></icon>
      </view>
    </view>

    <!-- 右侧发布按钮 -->
    <view class="publish-fab" bindtap="goPage" data-path="/pages/publish/publish">
      <icon name="plus" size="48" color="#ffffff"></icon>
    </view>
  </view>
</view>
